<script>
    const SECRET_CODE = atob("U1YtQUxQSEEtMjAyNQ=="); // SV-ALPHA-2025

    const codeScreen = document.getElementById("code-screen");
    const codeBg = document.getElementById("code-screen-bg");
    const mainMenu = document.getElementById("main-menu");

    // ===============================
    // 1. Prüfen, ob Zugang bereits erlaubt
    // ===============================
    if (localStorage.getItem("access_granted") === "true") {
        // Code-Screen ausblenden
        codeScreen.style.display = "none";
        codeBg.style.display = "none";

        // Hauptmenü anzeigen
        mainMenu.classList.remove("hidden");
    } else {
        // Alle Menüs außer Code-Screen verstecken
        document.querySelectorAll(".menu").forEach(m => {
            if (m.id !== "code-screen") m.classList.add("hidden");
        });
    }

    // ===============================
    // 2. Code prüfen
    // ===============================
    document.getElementById("btn-check-code").addEventListener("click", () => {
        const input = document.getElementById("access-code").value.trim();

        if (input === SECRET_CODE) {
            // Zugang speichern
            localStorage.setItem("access_granted", "true");

            // Code-Screen ausblenden
            codeScreen.style.display = "none";
            codeBg.style.display = "none";

            // Hauptmenü anzeigen
            mainMenu.classList.remove("hidden");
        } else {
            document.getElementById("code-error").style.display = "block";
        }
    });
</script>
