<!DOCTYPE html>
<html lang="de">
<head>
    <style>
body { background: red; }
</style>
    <meta charset="UTF-8">
    <title>MEINKRAFT TEST</title>

    <!-- ===============================
         CSS (Hintergrund + UI)
    ================================ -->
    <link rel="stylesheet" href="style.css">

    <!-- ===============================
         ENGINE: TEXTUREN + SOUNDS
         (MÜSSEN VOR DER WELT GELADEN WERDEN)
    ================================ -->
    <script src="game/textures/textures.js"></script>
    <script src="game/textures/sounds.js"></script>

    <!-- ===============================
         BLOCKDATEN + INVENTAR
         (WERKZEUGE, HÄRTE, ITEMS)
    ================================ -->
    <script src="blockData.js"></script>
    <script src="inventory.js"></script>

    <!-- ===============================
         WELT-GENERATOR
         (startWorld.js ODER world.js)
         MUSS VOR renderWorld.js GELADEN WERDEN!
    ================================ -->
    <script src="startWorld.js"></script>

    <!-- ===============================
         RENDERER (Canvas)
         MUSS NACH startWorld.js GELADEN WERDEN!
    ================================ -->
    <script src="renderWorld.js"></script>

    <!-- ===============================
         SKIN-SYSTEM
    ================================ -->
    <script src="skins.js"></script>

    <!-- ===============================
         UI / MENÜ / MUSIK / KLICK
    ================================ -->
    <script src="click.js"></script>
    <script src="music.js"></script>
    <script src="textres.js"></script>
</head>

<body>

    <!-- ===============================
         HAUPTMENÜ
    ================================ -->
    <div id="main-menu" class="menu">
        <div class="logo">MEINKRAFT</div>

        <button id="btn-singleplayer" class="menu-btn">Einzelspieler</button>
        <button id="btn-multiplayer" class="menu-btn disabled">Mehrspieler (nicht verfügbar)</button>
        <button id="btn-settings" class="menu-btn">Einstellungen</button>
        <button id="btn-quit" class="menu-btn">Beenden</button>
    </div>

    <!-- ===============================
         EINZELSPIELER-MENÜ
    ================================ -->
    <div id="singleplayer-menu" class="menu hidden">
        <div class="logo">Einzelspieler</div>

        <input id="seed-input" class="world-input" placeholder="Seed eingeben (optional)">
        <button id="btn-start-world" class="menu-btn">Welt starten</button>

        <button id="btn-back-from-single" class="menu-btn back-btn">Zurück</button>
    </div>

    <!-- ===============================
         EINSTELLUNGEN-MENÜ
    ================================ -->
    <div id="settings-menu" class="menu hidden">
        <div class="logo">Einstellungen</div>

        <div class="settings-group">Schwierigkeit</div>
        <button id="btn-diff-peaceful" class="menu-btn settings-btn">Friedlich</button>
        <button id="btn-diff-easy-heal" class="menu-btn settings-btn">Einfach – mit Essen heilen, ohne feindliche Mobs</button>
        <button class="menu-btn settings-btn disabled">Einfach – mit Essen, mit feindlichen Mobs (nicht verfügbar)</button>
        <button class="menu-btn settings-btn disabled">Normal (nicht verfügbar)</button>
        <button class="menu-btn settings-btn disabled">Schwer (nicht verfügbar)</button>
        <button class="menu-btn settings-btn disabled">HARDMODE!!! (nicht verfügbar)</button>

        <div class="settings-group">Sprache</div>
        <button class="menu-btn settings-btn disabled">Language (nicht verfügbar)</button>

        <div class="settings-group">Musik</div>
        <button id="btn-music-toggle" class="menu-btn settings-btn">Musik: AN</button>

        <div class="settings-group">Sounds</div>
        <button id="btn-sounds-placeholder" class="menu-btn settings-btn disabled">Sounds (noch nicht implementiert)</button>

        <button id="btn-back-from-settings" class="menu-btn back-btn">Zurück</button>
    </div>

    <!-- ===============================
         HAUPT-SCRIPT (MENÜ LOGIK)
    ================================ -->
    <script>
        function playClickSafe() {
            if (typeof playClick === "function") playClick();
        }

        let musicEnabled = true;
        function toggleMusic() {
            musicEnabled = !musicEnabled;
            const btn = document.getElementById("btn-music-toggle");
            btn.textContent = "Musik: " + (musicEnabled ? "AN" : "AUS");

            if (typeof setMusicEnabled === "function") setMusicEnabled(musicEnabled);
            else if (typeof toggleMusicState === "function") toggleMusicState(musicEnabled);
        }

        function startWorldWithSeed(seed) {
            if (typeof startWorld === "function") startWorld(seed);
            else if (typeof initWorld === "function") initWorld(seed);

            if (typeof detectPlayerType === "function") detectPlayerType();

            if (PlayerSkin && PlayerSkin.parts && PlayerSkin.parts.hand) {
                const handCanvas = PlayerSkin.parts.hand;
                handCanvas.style.position = "fixed";
                handCanvas.style.right = "20px";
                handCanvas.style.bottom = "20px";
                handCanvas.style.width = "128px";
                handCanvas.style.imageRendering = "pixelated";
                document.body.appendChild(handCanvas);
            }

            if (typeof Sound !== "undefined" && typeof Sound.init === "function") Sound.init();
            if (typeof startMusic === "function") startMusic();
        }

        const mainMenu = document.getElementById("main-menu");
        const singleMenu = document.getElementById("singleplayer-menu");
        const settingsMenu = document.getElementById("settings-menu");

        function showMenu(menu) {
            mainMenu.classList.add("hidden");
            singleMenu.classList.add("hidden");
            settingsMenu.classList.add("hidden");
            menu.classList.remove("hidden");
        }

        document.getElementById("btn-singleplayer").addEventListener("click", () => {
            playClickSafe();
            showMenu(singleMenu);
        });

        document.getElementById("btn-settings").addEventListener("click", () => {
            playClickSafe();
            showMenu(settingsMenu);
        });

        document.getElementById("btn-quit").addEventListener("click", () => {
            playClickSafe();
            alert("Beenden ist im Browser nicht möglich.");
        });

        document.getElementById("btn-back-from-single").addEventListener("click", () => {
            playClickSafe();
            showMenu(mainMenu);
        });

        document.getElementById("btn-start-world").addEventListener("click", () => {
            playClickSafe();
            const seed = document.getElementById("seed-input").value.trim();
            startWorldWithSeed(seed);
        });

        document.getElementById("btn-back-from-settings").addEventListener("click", () => {
            playClickSafe();
            showMenu(mainMenu);
        });

        document.getElementById("btn-diff-peaceful").addEventListener("click", () => {
            playClickSafe();
            console.log("Schwierigkeit: Friedlich");
        });

        document.getElementById("btn-diff-easy-heal").addEventListener("click", () => {
            playClickSafe();
            console.log("Schwierigkeit: Einfach (Heilen mit Essen, ohne feindliche Mobs)");
        });

        document.getElementById("btn-music-toggle").addEventListener("click", () => {
            playClickSafe();
            toggleMusic();
        });
    </script>

</body>
</html>
