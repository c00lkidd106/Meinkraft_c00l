<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>MEINKRAFT – Alpha</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- SCHWARZER HINTERGRUND FÜR CODE-SCREEN -->
    <div id="code-screen-bg"></div>

    <!-- ZUGANGSCODE -->
    <div id="code-screen" class="menu">
        <h1>Zugangscode</h1>
        <input type="password" id="access-code" placeholder="Code eingeben" class="world-input">
        <button class="menu-btn" id="btn-check-code">Bestätigen</button>

        <p id="code-error" style="color:#ff5555; margin-top:15px; display:none;">
            Falscher Code. Diese Version wird bald öffentlich sein.
        </p>
    </div>

    <!-- HAUPTMENÜ -->
    <div id="main-menu" class="menu hidden fade-in">
        <h1 class="logo">MEINKRAFT</h1>

        <button class="menu-btn" id="btn-singleplayer">Einzelspieler</button>
        <button class="menu-btn disabled">Mehrspieler</button>
        <button class="menu-btn" id="btn-settings">Einstellungen</button>
        <button class="menu-btn" id="btn-difficulty">Schwierigkeit</button>
        <button class="menu-btn disabled">Sprache</button>
    </div>

    <!-- EINZELSPIELER -->
    <div id="singleplayer-menu" class="menu hidden">
        <h1>Einzelspieler</h1>

        <button class="menu-btn" id="btn-create-world">Welt erstellen</button>
        <button class="menu-btn back-btn" data-back="main-menu">Zurück</button>
    </div>

    <!-- WELT ERSTELLEN -->
    <div id="create-world-menu" class="menu hidden">
        <h1>Welt erstellen</h1>

        <input type="text" id="world-name" placeholder="Weltname" class="world-input">
        <input type="text" id="seed-input" placeholder="Seed (leer = zufällig)" class="world-input">

        <button class="menu-btn" id="btn-start-world">Welt starten</button>
        <button class="menu-btn back-btn" data-back="singleplayer-menu">Zurück</button>
    </div>

    <!-- EINSTELLUNGEN -->
    <div id="settings-menu" class="menu hidden">
        <h1>Einstellungen</h1>

        <div class="settings-slider">
            <label>Musiklautstärke</label>
            <input type="range" id="music-volume" min="0" max="100" value="50">
        </div>

        <div class="settings-slider">
            <label>Soundlautstärke</label>
            <input type="range" id="sound-volume" min="0" max="100" value="70">
        </div>

        <button class="menu-btn back-btn" data-back="main-menu">Zurück</button>
    </div>

    <!-- SCHWIERIGKEIT -->
    <div id="difficulty-menu" class="menu hidden">
        <h1>Schwierigkeit</h1>

        <button class="menu-btn diff-btn" data-diff="peaceful">Friedlich</button>
        <button class="menu-btn diff-btn" data-diff="easy_nofight">Einfach (kein Kampf)</button>
        <button class="menu-btn diff-btn" data-diff="easy_fight">Einfach (mit Kampf)</button>
        <button class="menu-btn diff-btn" data-diff="normal">Normal</button>
        <button class="menu-btn diff-btn" data-diff="hard">Schwer</button>
        <button class="menu-btn disabled">Hardcore</button>

        <button class="menu-btn back-btn" data-back="main-menu">Zurück</button>
    </div>

    <!-- ========================= -->
    <!--   ALLE SCRIPTS RICHTIG    -->
    <!-- ========================= -->

    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

    <script src="music.js"></script>
    <script src="worldgen.js"></script>
    <script src="input.js"></script>
    <script src="player.js"></script>
    <script src="engine3d.js"></script>
    <script src="menu.js"></script>

    <!-- ZUGANGSCODE-SYSTEM -->
    <script>
        const SECRET_CODE = atob("U1YtQUxQSEEtMjAyNQ=="); // SV-ALPHA-2025

        if (localStorage.getItem("access_granted") === "true") {
            document.getElementById("code-screen").style.display = "none";
            document.getElementById("code-screen-bg").style.display = "none";
        } else {
            document.querySelectorAll(".menu").forEach(m => {
                if (m.id !== "code-screen") m.classList.add("hidden");
            });
        }

        document.getElementById("btn-check-code").addEventListener("click", () => {
            const input = document.getElementById("access-code").value.trim();

            if (input === SECRET_CODE) {
                localStorage.setItem("access_granted", "true");

                document.getElementById("code-screen").style.display = "none";
                document.getElementById("code-screen-bg").style.display = "none";

                document.getElementById("main-menu").classList.remove("hidden");
            } else {
                document.getElementById("code-error").style.display = "block";
            }
        });
    </script>

</body>
</html>
